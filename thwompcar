local CAR = Instance.new("VehicleSeat", script)
CAR.Anchored = true
CAR.Position = Vector3.new(0, 20)
CAR.HeadsUpDisplay = false

local CARmesh = Instance.new("SpecialMesh", CAR)
CARmesh.MeshId = "rbxassetid://1166992738"
CARmesh.TextureId = "rbxassetid://1166992753"
CARmesh.Scale = Vector3.new(.2, .2, .2)
CARmesh.Offset = Vector3.new(0, 1.2)

local Attachment0 = Instance.new("Attachment", CAR)
Attachment0.Position = Vector3.new(5.3, -1, 5)
local Attachment1 = Instance.new("Attachment", CAR)
Attachment1.Position = Vector3.new(-5.3, -1, 5)

local Beam = Instance.new("Trail", CAR)
Beam.LightEmission = 1
Beam.LightInfluence = 0
Beam.Lifetime = 2
Beam.Attachment0 = Attachment0
Beam.Attachment1 = Attachment1
Beam.Transparency = NumberSequence.new({
	NumberSequenceKeypoint.new(0, .3),
	NumberSequenceKeypoint.new(1, 1)
})
Beam.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)),
	ColorSequenceKeypoint.new(1, Color3.new(0, 1, 1))
})

local music = Instance.new("Sound", CAR)
music.SoundId = "rbxassetid://6938328943"
music.Volume = 5
music:Play()
music.TimePosition = 7

local momentum = Vector3.new()
local gravity = Vector3.new(0, -5)
local down = Vector3.new(0, -3)
local down2 = Vector3.new(0, 2.8)
local steer = -math.pi * 6
local steer2 = -math.pi * 2
local orientation = CFrame.new()
local lean = CFrame.new()

game:GetService("RunService").Stepped:Connect(function(_, deltaTime)
	local CF = CAR.CFrame
	local pos = CF.Position
	momentum = momentum * .97

	local steeramount = CAR.Steer * deltaTime
	orientation = orientation:Lerp(orientation * CFrame.Angles(0, steer * steeramount, 0), .1)
	lean = lean:Lerp(CFrame.Angles(0, 0, steer2 * steeramount), .1)
	
	if CAR.Occupant then
		momentum = momentum + CF.LookVector * CAR.Throttle * .1
	end
	
	local result = workspace:Raycast(pos, down)
	if result then
		momentum = momentum
		CAR.CFrame = orientation * lean + pos:Lerp(result.Position + down2 + momentum, .5)
	else
		momentum = momentum + gravity * deltaTime
		CAR.CFrame = orientation * lean + pos:Lerp(pos + momentum, .5)
	end
end)

music.Ended:Connect(function()
	music:Play()
	music.TimePosition = 7
end)
